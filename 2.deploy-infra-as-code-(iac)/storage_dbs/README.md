# Storage and Database
## Introduction
In this lesson, you will learn to utilize the following two different types of AWS storage options for a web application architecture:  
Relation Database Storage (RDS) service  
Object storage service - Simple Storage Service (S3)  

## RDS Databases 
### Persisting Data
Most applications need their data to persist and not be lost, which requires a database. We don't want a database to be a single point of failure, so we'll use resources that are designed for reliability. For example, RDS for the database, and S3 for the filestore.  

### Choosing a database
AWS Aurora and MySQL have no additional licensing costs. Microsoft SQL Server will have additional licensing costs.

### A single RDS Server can host multiple databases
Note that you can use a single RDS database that hosts multiple applications, each with different logins and users for those applications. In other words, you don’t need to create a separate RDS service for each application.  

Q: If I wanted to store information from my app and make sure it doesn't create a single point of failure for my application, I'd choose...  
A: Database on EC2 with replicas in another AZ  

### Connectivity
Subnet groups are needed for deploying in multiple AZs.  
We want to place our RDS in more than one Availability Zone (data center). We can place the RDS in two AZs to eliminate single point of failure and to have high availability.   
We created 4 subnets (2 private and 2 public), so the RDS can potentially be duplicated in all four subnets.  
However, keep in mind that we usually prefer to put databases in a private subnet, for security. There may be use cases where you put a database in a public subnet but generally put it in the private subnets.  

### Database Accessibility
Usually, don't make a database public.  
We'll choose "No" for public accessibility" to keep a database private.  
We'd normally use a private IP address to access a database.  

### VPC Security Groups
Default means every resource in the VPC can talk to any other resource that is within that same VPC. We'll keep this default, to allow resources in the VPC to reach the database.  

### Encryption
We can use encryption for sensitive production workloads. We can disable encryption for our database here.  

To delete go to modify to deactivate the Deletion protection option. Then stop and delete(reader and writer) instances.    

Q: Your database can only be accessed from other resources that have the appropriate ____ assigned to them.  
Security Group  

## S3: When to use Filestores
Use filestores instead of databases for large files, such as videos and text documents.  
Configuration files and sensitive encrypted data are best stored in specific filestores rather than inside the servers. Autoscaling groups may create or destroy servers, so keep data that you want to persist in separate resources such as a filestore.  

Q: Knowing that the server can be discarded by the auto-scaling group, which of these files can I safely place in it anyway? (Pick three below.)  

Intermediate steps generated by a build process  
temporary calculations leading to a result  
test files  

To list your S3 bucket  
`aws s3 ls`  

To list files in the S3 bucket.  
`aws s3 ls <link to S3 bucket>`  

This line copies a file from your local machine to the S3 bucket    
`aws s3 cp <file name> <link to S3 bucket>`  

S3 bucket is not restricted to a region. It is ready available via the cloud regions.

Two ways to make your static website open: 
Public S3 bucket  
Private S3 bucket and cloudfront  

### Versioning
You can keep past versions of your S3 bucket, which means that deleted files will still exist in prior versions of your S3 bucket.  

Q: If it was possible to write data in realtime to S3, would it be a good practice to do so? 
No  

### Summary 
S3 can be used to store your config files, media or log files.  
Your servers don't need credentials to access S3 provided they have a role assigned.  
We recommend you choose RDS as opposed to installing a database in your own servers that you have to manage and back up yourself.  

## Recommended best practices for S3 Storage
Remember to keep S3 as private as possible, never “Open to the world”  

If you need to share files publicly, use expiring pre-signed URLs as recommended  

If your web application captures incoming files, such as PDFs or Photos, capture those to local, temporary storage first, --which is really fast -- and then move the data to S3  

Finally, when creating IAM Roles, be sure to limit access to a specific bucket and not all of them!.  





